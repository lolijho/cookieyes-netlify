(()=>{var e={};e.id=327,e.ids=[327],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2543:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{patchFetch:()=>c,routeModule:()=>u,serverHooks:()=>m,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>l});var s=r(6559),o=r(8088),n=r(7719),i=r(6600),p=e([i]);i=(p.then?(await p)():p)[0];let u=new s.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/backup/restore/route",pathname:"/api/backup/restore",filename:"route",bundlePath:"app/api/backup/restore/route"},resolvedPagePath:"/Users/cuweb/Desktop/cookiefacile/cookie/app/api/backup/restore/route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:d,workUnitAsyncStorage:l,serverHooks:m}=u;function c(){return(0,n.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:l})}a()}catch(e){a(e)}})},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4562:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{db:()=>n});var s=r(8855),o=e([s]);s=(o.then?(await o)():o)[0];let n=(0,s.createClient)({url:process.env.STORAGE_TURSO_DATABASE_URL||process.env.TURSO_DATABASE_URL||"file:./local.db",authToken:process.env.STORAGE_TURSO_AUTH_TOKEN||process.env.TURSO_AUTH_TOKEN});a()}catch(e){a(e)}})},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},6600:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{GET:()=>i});var s=r(2190),o=r(4562),n=e([o]);async function i(e){try{console.log("\uD83D\uDCE5 Ripristino progetti da Turso");let e=await o.db.execute({sql:`
        SELECT name FROM sqlite_master 
        WHERE type='table' AND name='project_backups'
      `,args:[]});if(0===e.rows.length)return console.log("\uD83D\uDCE6 Nessuna tabella backup trovata"),s.NextResponse.json({message:"Nessun backup trovato",projects:[]});let t=(await o.db.execute({sql:`
        SELECT id, user_id, name, domain, language, banner_config, 
               created_at, updated_at, backup_timestamp
        FROM project_backups
        ORDER BY backup_timestamp DESC
      `,args:[]})).rows.map(e=>({id:e.id,user_id:e.user_id,name:e.name,domain:e.domain,language:e.language,banner_config:JSON.parse(e.banner_config),created_at:e.created_at,updated_at:e.updated_at,backup_timestamp:e.backup_timestamp}));return console.log(`âœ… Ripristinati ${t.length} progetti da Turso`),s.NextResponse.json({message:"Ripristino completato",projects:t,count:t.length})}catch(e){return console.error("Errore ripristino da Turso:",e),s.NextResponse.json({error:"Errore interno del server"},{status:500})}}o=(n.then?(await n)():n)[0],a()}catch(e){a(e)}})},8335:()=>{},8855:e=>{"use strict";e.exports=import("@libsql/client")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[447,580],()=>r(2543));module.exports=a})();